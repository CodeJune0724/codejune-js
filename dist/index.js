!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.zj0724common=t():e.zj0724common=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BasePO:()=>d,BaseService:()=>c,DatabaseService:()=>p,HttpOption:()=>s,InfoException:()=>r,Query:()=>a,ResponseResult:()=>o,Service:()=>u,base64:()=>y,file:()=>g,http:()=>h,httpType:()=>i,promise:()=>m,variable:()=>l});class r extends Error{constructor(e){super(e)}}const s=class{url;type;header;urlData;data;constructor(e){this.url=e.url,this.type=e.type,this.header=e.header?e.header:{},this.urlData=e.urlData?e.urlData:{},this.data=e.data?e.data:{}}};var n;!function(e){e.POST="POST",e.GET="GET",e.PUT="PUT",e.DELETE="DELETE"}(n||(n={}));const i=n;class a{page;size;filter={};sort={}}const l={isNull:e=>null==e,isEmpty(e){if(this.isNull(e))return!0;let t=this.getType(e);return t===String&&""===e||t===Array&&0===e.length||t===Object&&0===Object.keys(e).length},getType(e){return this.isNull(e)?null:e.constructor},isObject(e){if(this.isNull(e))return!1;if(e instanceof Object){let t=this.getType(e);return null!=t&&(void 0!==JSON.stringify(e)||0===t.toString().indexOf("class")||t===Array||t===Object)}return!1},clone(e){if(this.isObject(e)){if(this.getType(e)===Array){let t=[];for(let r of e)t.push(this.clone(r));return t}{let t={};for(let r in e)if(e.hasOwnProperty(r)){let s=e[r];this.isObject(s)?t[r]=this.clone(s):t[r]=null}return this.assignment(t,e),t}}return this.isNull(e)?null:e},assignment(e,t,r){let s=this.getType(e),n=!!this.isEmpty(r)||!0===r;if(this.isObject(e)&&this.isObject(t))if(s===Array){let r=!0;if(n&&this.getType(t)!==Array&&(r=!1),s!==this.getType(t)&&(r=!1),r){e.splice(0,e.length);for(let r of t)e.push(this.clone(r))}}else for(let r in e){let s=e[r],i=t[r];void 0!==i&&(null!=s&&n&&(null!==i||this.isObject(s))?this.getType(s)===this.getType(i)&&(e[r]=this.clone(i)):e[r]=this.clone(i))}},toStr(e){return this.isNull(e)?null:this.isObject(e)?JSON.stringify(e):e.toString()},clean(e){if(this.isObject(e))for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];this.getType(r)===Array?e[t]=[]:this.isObject(r)?this.clean(r):e[t]=null}},addKey(e,t){if(this.isObject(e)&&this.isObject(t))for(let r in t){let s=t[r];this.isNull(e[r])&&(this.isObject(s)?this.getType(s)===Array?e[r]=[]:e[r]={}:e[r]=null),this.addKey(e[r],s)}}};class o{flag;code;message;result;constructor(e){l.assignment(this,e)}}class d{id}const h={send(e){return new Promise(((t,r)=>{let s=this._getUrl(e),n=e.type,a=e.header?e.header:{},o=e.data,d=!1;if(l.isObject(o)){for(let e in o)if(l.getType(o[e])===File){d=!0;break}if(d){let e=new FormData;for(let t in o)e.append(t,o[t]);o=e}}l.isObject(o)&&l.getType(o)!==FormData&&(o=JSON.stringify(o)),n===i.GET||d||(a["content-type"]="application/json"),fetch(s,{cache:"no-cache",credentials:"same-origin",mode:"cors",redirect:"follow",referrer:"no-referrer",method:n,headers:a,body:o}).then((e=>{let s=e.text();e.ok?t(s):r(s)})).catch((e=>{r(e)}))}))},download(e){return new Promise(((t,r)=>{try{window.open(this._getUrl(e)),t()}catch(e){r(e)}}))},asyncDownload(e){return new Promise(((t,r)=>{fetch(this._getUrl(e)).then((e=>{e.blob().then((s=>{try{let r=document.createElement("a"),n=window.URL.createObjectURL(s),i=e.headers.get("Content-Disposition");i=i||"";let a=/filename=(.*?)$/g.exec(i);null!==a&&(i=a[1]),r.href=n,r.download=i,r.click(),window.URL.revokeObjectURL(n),t()}catch(e){r(e)}}))}))}))},_getUrl(e){let t=e.url,r=e.urlData?e.urlData:{};if(!l.isEmpty(r)){let e="?";for(let t in r){let s=r[t];l.isEmpty(s)||(e=e+t+"="+s+"&")}e="?"!==e?e.substring(0,e.length-1):"",t+=e}return t}};class u{url;data={};constructor(e){this.url=e}$send(e,t){return new Promise(((s,n)=>{let i=e.url,a=e.type,o=e.header,d=e.data,u=e.urlData;if(l.isEmpty(i))throw new r("方法名 is null");if(l.isEmpty(a))throw new r("type is null");l.isEmpty(this.data[i])&&(this.data[i]={request:null,response:null}),null!=d&&(this.data[i].request=d),(l.isEmpty(t)||void 0===t)&&(t=()=>{});let c={url:this.url+"/"+i,type:a,header:o,data:this.data[i].request,urlData:u};t(c),this.$requestHandler(c),h.send(c).then((e=>{let t;l.clean(this.data[i].response);try{t=JSON.parse(e)}catch(r){t=e}l.isObject(this.data[i].response)?(l.addKey(this.data[i].response,t),l.assignment(this.data[i].response,t)):this.data[i].response=t,s(this.data[i].response)})).catch((e=>{n(e)}))}))}$download(e,t){return new Promise(((s,n)=>{let a=e.url,o=e.urlData;if(l.isEmpty(a))throw new r("方法名 is null");l.isEmpty(this.data[a])&&(this.data[a]={request:null,response:null}),void 0!==o&&(this.data[a].request=o),(void 0===t||l.isEmpty(t))&&(t=()=>{});let d={url:this.url+"/"+a,type:i.GET,urlData:this.data[a].request};t(d),this.$requestHandler(d),h.download(d).then((()=>{s()})).catch((e=>{n(e)}))}))}$requestHandler(e){}$addData(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null),this.data[e]={request:t,response:r}}}class c extends u{data={};constructor(e){super(e)}$send(e,t){return new Promise(((r,s)=>{super.$send(e,t).then((e=>{e.flag?r(e):s(e)})).catch((e=>{s(e)}))}))}}class p extends c{data;constructor(e,t){super(e),this.data={query:{request:new a,response:new o({result:{count:null,data:null}})},save:{request:void 0===t?null:t,response:new o},saveList:{request:void 0===t?null:[],response:new o},delete:{request:void 0===t?null:t,response:new o},deleteList:{request:void 0===t?null:[],response:new o}}}query(e){return this.$send({url:"query",type:i.POST,data:e})}save(e){return this.$send({url:"save",type:i.POST,data:e})}saveList(e){return this.$send({url:"saveList",type:i.POST,data:e})}doDelete(e){return this.$send({url:"delete",type:i.POST,data:e})}deleteList(e){return this.$send({url:"deleteList",type:i.POST,data:e})}}let f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const y={encode(e){let t,r,s,n,i,a,l,o="",d=0;for(e=function(e){let t="";e=e.replace(/\r\n/g,"\n");for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t+=String.fromCharCode(s):s>127&&s<2048?(t+=String.fromCharCode(s>>6|192),t+=String.fromCharCode(63&s|128)):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128),t+=String.fromCharCode(63&s|128))}return t}(e);d<e.length;)t=e.charCodeAt(d++),r=e.charCodeAt(d++),s=e.charCodeAt(d++),n=t>>2,i=(3&t)<<4|r>>4,a=(15&r)<<2|s>>6,l=63&s,isNaN(r)?a=l=64:isNaN(s)&&(l=64),o=o+f.charAt(n)+f.charAt(i)+f.charAt(a)+f.charAt(l);return o},decode(e){let t,r,s,n,i,a,l,o="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)n=f.indexOf(e.charAt(d++)),i=f.indexOf(e.charAt(d++)),a=f.indexOf(e.charAt(d++)),l=f.indexOf(e.charAt(d++)),t=n<<2|i>>4,r=(15&i)<<4|a>>2,s=(3&a)<<6|l,o+=String.fromCharCode(t),64!==a&&(o+=String.fromCharCode(r)),64!==l&&(o+=String.fromCharCode(s));return o=function(e){let t,r,s="",n=0,i=0;for(;n<e.length;)t=e.charCodeAt(n),t<128?(s+=String.fromCharCode(t),n++):t>191&&t<224?(r=e.charCodeAt(n+1),s+=String.fromCharCode((31&t)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),i=e.charCodeAt(n+2),s+=String.fromCharCode((15&t)<<12|(63&r)<<6|63&i),n+=3);return s}(o),o}},g={select:()=>new Promise((e=>{let t=document.createElement("input");t.type="file",t.addEventListener("change",(function(){let r=t.files;e(null===r?null:r[0])})),t.click()}))},m={then:(e,t)=>new Promise(((r,s)=>{e.then((e=>{t(e),r(e)})).catch((e=>{s(e)}))}))};return t})()));