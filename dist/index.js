!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.index=e():t.index=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,r)=>{for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>o});const r={isNull:t=>null==t,isEmpty(t){if(this.isNull(t))return!0;let e=this.getType(t);return e===String&&""===t||e===Array&&0===t.length||e===Object&&0===Object.keys(t).length},getType(t){return this.isNull(t)?null:t.constructor},isObject(t){if(this.isNull(t))return!1;if(t instanceof Object){let e=this.getType(t);return 0===e.toString().indexOf("class")||e===Array||e===Object}return!1},clone(t){if(this.isObject(t)){if(this.getType(t)===Array){let e=[];for(let r of t)e.push(this.clone(r));return e}{let e={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];this.isObject(i)?e[r]=this.clone(i):e[r]=null}return this.assignment(e,t),e}}return this.isNull(t)?null:t},assignment(t,e,r){let i=this.getType(t);if(this.isObject(t)&&this.isObject(e))if(i===Array){let s=!0;if(!0===r&&this.getType(e)!==Array&&(s=!1),i!==this.getType(e)&&(s=!1),s){t.splice(0,t.length);for(let r of e)t.push(this.clone(r))}}else for(let i in t)if(t.hasOwnProperty(i)){let s=t[i],n=e[i];if(void 0===n)continue;this.isObject(s)?this.getType(s)===this.getType(n)?this.assignment(s,n):!this.isNull(r)&&this.getType(r)===Boolean&&r||(t[i]=this.clone(n)):!this.isNull(r)&&this.getType(r)===Boolean&&r?(this.isNull(s)||this.getType(s)===this.getType(n))&&(t[i]=this.clone(n)):t[i]=this.clone(n)}},toStr(t){return this.isNull(t)?null:this.isObject(t)?JSON.stringify(t):t.toString()},clean(t){if(this.isObject(t))for(let e in t)if(t.hasOwnProperty(e)){let r=t[e];this.getType(r)===Array?t[e]=[]:this.isObject(r)?this.clean(r):t[e]=null}}};class i extends Error{constructor(t){super(t)}}let s=[String,Number,Object,Array,Boolean];class n{constructor(t){if(this.url=null,this.type=null,this.header=null,this.urlData=null,this.data=null,this.check={urlData:null,data:null},this.setContentTypeByJson=!0,r.assignment(this,t),r.isEmpty(this.url))throw new i("url不能为空");if(r.isEmpty(this.type))throw new i("type不能为空");if("get"===this.type&&(this.type="GET"),"post"===this.type&&(this.type="POST"),"put"===this.type&&(this.type="PUT"),"delete"===this.type&&(this.type="DELETE"),"POST"!==this.type&&"GET"!==this.type&&"PUT"!==this.type&&"DELETE"!==this.type)throw new i("type错误");if(!r.isNull(this.header)){if(!r.isObject(this.header))throw new i("header错误");for(let t in this.header)this.header.hasOwnProperty(t)&&(this.header[t]=r.toStr(this.header[t]))}if(!r.isNull(this.urlData)&&!r.isObject(this.urlData))throw new i("urlData错误");if(!r.isNull(this.check.urlData)){if(!n.withType(this.check.urlData))throw new i("check.urlData错误");let t=n.getNewData(this.check.urlData);r.assignment(t,this.urlData,!0),this.urlData=t}if(!r.isNull(this.check.data)){if(!n.withType(this.check.data))throw new i("check.data错误");let t=n.getNewData(this.check.data);r.assignment(t,this.data),this.data=t}if(!r.isNull(this.urlData)){let t="?";for(let e in this.urlData)if(this.urlData.hasOwnProperty(e)){let i=this.urlData[e];r.isNull(i)||(i=r.toStr(i),t=t+e+"="+i+"&")}t="?"!==t?t.substr(0,t.length-1):"",this.url=this.url+t}if(null!==this.data){let t=!1;for(let e in this.data)if(this.data.hasOwnProperty(e)&&r.getType(this.data[e])===File){t=!0;break}if(t){let t=new FormData;for(let e in this.data)this.data.hasOwnProperty(e)&&t.append(e,this.data[e]);this.data=t}else!0===this.setContentTypeByJson&&"POST"===this.type&&(null===this.header&&(this.header={}),this.header["content-type"]="application/json"),this.data=r.toStr(this.data)}}static withType(t){if(!r.isObject(t))return!1;for(let e in t)if(t.hasOwnProperty(e)){let i=t[e];if(r.isObject(i)){if(!n.withType(i))return!1}else{let t=!1;for(let e of s)e===i&&(t=!0);if(!t)return!1}}return!0}static getNewData(t){let e={};for(let i in t)if(t.hasOwnProperty(i)){let s=t[i];r.isObject(s)?e[i]=n.getNewData(s):e[i]=null}return e}}let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const l={encode(t){let e,r,i,s,n,l,h,o="",c=0;for(t=function(t){let e="";t=t.replace(/\r\n/g,"\n");for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}(t);c<t.length;)e=t.charCodeAt(c++),r=t.charCodeAt(c++),i=t.charCodeAt(c++),s=e>>2,n=(3&e)<<4|r>>4,l=(15&r)<<2|i>>6,h=63&i,isNaN(r)?l=h=64:isNaN(i)&&(h=64),o=o+a.charAt(s)+a.charAt(n)+a.charAt(l)+a.charAt(h);return o},decode(t){let e,r,i,s,n,l,h,o="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)s=a.indexOf(t.charAt(c++)),n=a.indexOf(t.charAt(c++)),l=a.indexOf(t.charAt(c++)),h=a.indexOf(t.charAt(c++)),e=s<<2|n>>4,r=(15&n)<<4|l>>2,i=(3&l)<<6|h,o+=String.fromCharCode(e),64!==l&&(o+=String.fromCharCode(r)),64!==h&&(o+=String.fromCharCode(i));return o=function(t){let e,r,i="",s=0,n=0;for(;s<t.length;)e=t.charCodeAt(s),e<128?(i+=String.fromCharCode(e),s++):e>191&&e<224?(r=t.charCodeAt(s+1),i+=String.fromCharCode((31&e)<<6|63&r),s+=2):(r=t.charCodeAt(s+1),n=t.charCodeAt(s+2),i+=String.fromCharCode((15&e)<<12|(63&r)<<6|63&n),s+=3);return i}(o),o}},h={send:t=>new Promise(((e,i)=>{let s=new n(t),a=new XMLHttpRequest;if(a.open(s.type,s.url),!r.isNull(s.header))for(let t in s.header)s.header.hasOwnProperty(t)&&a.setRequestHeader(t,s.header[t]);try{r.isNull(s.data)?a.send():a.send(s.data)}catch(t){i(t)}a.onreadystatechange=function(){4===a.readyState&&(200===a.status?e(a.response):i(a.response))}})),download:t=>new Promise(((e,r)=>{try{let r=new n(t);window.open(r.url),e()}catch(t){r(t)}})),asynchronousDownload:t=>new Promise(((e,i)=>{let s=new n(t),a=new XMLHttpRequest;if(a.open(s.type,s.url),a.responseType="blob",!r.isNull(s.header))for(let t in s.header)s.header.hasOwnProperty(t)&&a.setRequestHeader(t,s.header[t]);try{a.send()}catch(t){i(t)}a.onload=function(){if(console.log(a),200===a.status){let t=new FileReader;t.onload=function(t){let r=t.target.result;if("data:application/json;base64,"===r.substring(0,29)){let t=l.decode(r.substring(29,r.length));return void i(t)}let s=document.createElement("a");s.download=decodeURIComponent(a.getResponseHeader("Content-disposition")).substring(20),s.href=t.target.result,s.click(),e()},t.readAsDataURL(a.response)}else try{a.responseText}catch(t){i(t)}}}))},o={variable:r,http:h,base64:l,file:{select:()=>new Promise((t=>{let e=document.createElement("input");e.type="file",e.addEventListener("change",(function(){let r=e.files[0];t(r)})),e.click()}))}};return e})()}));